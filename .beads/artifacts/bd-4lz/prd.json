{
	"beadId": "bd-4lz",
	"prdName": "product-detail-inventory-must-load-from-db",
	"tasks": [
		{
			"id": "frontend-1",
			"category": "frontend",
			"title": "Propagate quantity to product detail model",
			"description": "Product detail data model and mapping retain quantity from API so the UI can consume DB-backed stock values.",
			"steps": [
				"npm run typecheck",
				"rg \"mapApiProductToCard|quantity\" frontend/src/app/products/\\[id\\]/page.tsx frontend/src/components/ProductCard.tsx"
			],
			"passes": true,
			"metadata": {
				"depends_on": [],
				"parallel": false,
				"conflicts_with": [],
				"files": [
					"frontend/src/app/products/[id]/page.tsx",
					"frontend/src/components/ProductCard.tsx"
				]
			}
		},
		{
			"id": "frontend-2",
			"category": "frontend",
			"title": "Render inventory state from DB quantity",
			"description": "Product detail inventory section shows in-stock or out-of-stock state and quantity based on API quantity instead of hardcoded text.",
			"steps": [
				"npm run typecheck",
				"npm run lint:fix",
				"Manual: open /products/<slug> where quantity is 0 and >0; confirm UI text changes with real values."
			],
			"passes": true,
			"metadata": {
				"depends_on": ["Propagate quantity to product detail model"],
				"parallel": false,
				"conflicts_with": [],
				"files": ["frontend/src/app/products/[id]/page.tsx"]
			}
		},
		{
			"id": "tests-1",
			"category": "tests",
			"title": "Add regression coverage for PDP inventory display",
			"description": "Automated tests validate that product detail inventory reflects API quantity values and no longer depends on mock stock text.",
			"steps": [
				"bunx playwright test playwright/tests/demo-user-12/test-cases.spec.ts --grep \"stock|ton kho|quantity|product detail\""
			],
			"passes": true,
			"metadata": {
				"depends_on": ["Render inventory state from DB quantity"],
				"parallel": false,
				"conflicts_with": [],
				"files": ["playwright/tests/demo-user-12/test-cases.spec.ts"]
			}
		}
	],
	"context": {
		"patterns": [
			"Product detail page loads product via fetchProductById/fetchProductBySlug and maps through mapApiProductToCard in frontend/src/app/products/[id]/page.tsx.",
			"API contract includes Product.quantity in frontend/src/lib/api.ts.",
			"Backend source of truth for stock is Product.quantity in backend/src/models/Product.js."
		],
		"keyFiles": [
			"frontend/src/app/products/[id]/page.tsx",
			"frontend/src/components/ProductCard.tsx",
			"frontend/src/lib/api.ts",
			"playwright/tests/demo-user-12/test-cases.spec.ts"
		],
		"nonGoals": [
			"Changing backend inventory write/update logic.",
			"Implementing checkout stock reservation.",
			"Refactoring unrelated product detail features."
		]
	},
	"beadMetadata": {
		"depends_on": [],
		"parallel": false,
		"conflicts_with": [],
		"blocks": [],
		"estimated_hours": 2
	}
}
